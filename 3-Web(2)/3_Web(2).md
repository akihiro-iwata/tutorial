# Webの基礎知識
## Javascript
Javascriptは、プログラミング言語の１つである。Javaと名前が似ているが、関係性はない。  
Javascriptは、他のプログラミング言語とは異なり、インターネットブラウザー上で動作する。  
換言すれば、インターネットブラウザー上で動作するアニメーションやDOMの制御はJavascript(とCSS)以外では行えないということになる。よって、Webサイトやアプリケーションを開発する際には必ず使用する言語である。よって、これを理解することは非常に重要である。  
以下、Javascirptの言語仕様と、DOM操作について記載する。  

## プログラムの実行環境と開発環境
全てのプログラムは、PCやサーバーといった、何がしかのコンピューター上で動作する。  
また同様に、全てのプログラムは最終的にはバイナリ(0,1)に変換され、実行される。  
Javascriptについて触れる前に、プログラムがどのように実行されるのかという流れについて、概要を記載する。  

### プログラムの実行環境
プログラムを最終的に実行するのはCPUである。  
CPUは命令セット(Instruction Set)と呼ばれる、命令を伝えるための語彙を持つ。この命令セットは、開発元の企業や、CPUの用途などにより、様々な種類が存在する。

```
命令セット
↓ ← CPUが解釈、変換
実行
```

要するに、CPUに処理を渡すためには、命令セットを渡す必要があるということになる。(厳密には、CPUへこれを直接渡すのではなく、OSがそれを管理する)  
命令セットの実態はバイナリ(0/1)である。極論を言えば、0/1の羅列を正しく書ききれば、CPUに命令を実行させることはできるということになる。ただし大変な労力を要する。しかし、実際に1960年代などは人間がこれを記述することで、CPUを動かしていた。

Javascript、PHPといったプログラミング言語は、このように人間が0/1を記述する労力を軽減するために、人間が理解しやすい文字列を、最終的にこのようなバイナリへ変換する機能を有している。この変換を担うのが**コンパイラ**と呼ばれる機能である。  

```
プログラミング言語
↓ ←コンパイラが解釈、変換
命令セット ←CPUが解釈、実行
↓
実行
```

コンパイラのように、プログラミング言語をCPUに実行させるために必要な機構を総称して**プログラムの実行環境**と呼ぶことが多い。実行環境がなければ、どんなに良く書かれたソースコードでも、CPUにそれを実行させることはできない。  

### Javascriptの実行環境
Javaを実行するためにはJVMが必要である。Oracleは「30億のデバイスで動くJava」というキャッチフレーズをよく使う。これを言い換えると、世界中の30億のデバイスにはJVMがインストールされているということになる。  

```
Java
↓ ← JVMがコンパイル
JVM命令セット ← JVMが解釈
↓
命令セット ← CPUが解釈、実行
↓
実行
```

最初に、Javascriptはインターネットブラウザー上で動作すると記載した。これを言い換えると**Javascript→命令セットへの変換はインターネットブラウザーが行っている**ということである。

```
Javascript
↓ ← インターネットブラウザーが解釈、変換
命令セット ← CPUが解釈、実行
↓
実行
```

### 開発環境:インターネットブラウザーを使ってJavascriptを書く
上述の通り、Javascriptの主な動作環境はインターネットブラウザーである。  
開発環境とは、実行環境+ソースコードを書くためのツール、のセットをことを示す。
JavaであればJVMに対応したエディタ(eclipseなど)を使用してソースコードを書く。  

Javascriptの場合、様々な方法があるが

1.  インターネットブラウザー上で書き、実行する  
2.  任意のテキストエディターを使って書き、実行する

の2通りが挙げられる。

#### インターネットブラウザー上で書く&実行する
多くのインターネットブラウザーには、ブラウザー上でJavascriptを直接書き込み、実行するための環境が用意されている。  
このような環境を総称してplaygroundと呼ぶ。 

#### 任意のテキストエディターを使って書き、実行する
Javascriptをブラウザ上のplayground環境以外で動かす(つまりユーザーと同等の方法で動かす)ためには、htmlを経由する必要がある。  

- index.html

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script type="text/javascript" src="./scripts/index.js" ></script>
</body>
</html>
```

- index.js

```javascript
console.log('hello world');
```

- フォルダ階層

```
- index.htm;
- scripts
 |- index.js
```

この状態でindex.htmlを起動すると、`<script type="text/javascript" src="./scripts/index.js" ></script>`が実行される。  
scriptタグは、`src`にあたえられているスクリプトを読み込み、実行する。  
ここで、index.jsが実行され、Consoleへ`hello world`が出力される。  

以下、Javascriptの動作確認を行なう際は、このようにhtmlからjavascriptを呼び出す方法を前提とする。  

### Javascriptの言語仕様
#### 変数・定数
変数とはプログラム中の値を保持して置くためのものである。
JavaScriptでの変数とは一般的に、以下のように定義する。

```javascript
var sum = 21; // サイコロの眼の合計
const count = 6; // サイコロの目の数
var avg = 21 / count; // サイコロの目の平均値
```

#### 制御構文
if文を使用することで、条件分岐を行なうことができる。  

```javascript
var min = 1; // サイコロの目の最小値
var max = 6; // サイコロの目の最大値
var a = Math.floor( Math.random() * (max + 1 - min) ) + min ; // 1 〜 6の値をランダムに返す

if (a % 2 === 0) { // 2で割った余りが0の場合
    console.log(a + ": 偶数");
} else {
    console.log(a + ": 奇数");
}
```

for文を使用することで、繰り返し処理を行なうことができる。  

```javascript
for (var i = 0; i < 10; i++){
    console.log("for loop count: " + i);
}
```

#### Exercise
- if文以外のJavascriptの制御構文を使って、任意の値を出力するプログラムを書いてください
  - while
  - switch

- 以下のプログラムを作成してください
  - `1〜100までのループの中で、フィボナッチ数列を出力する`
  - `1〜100までのループの中で、ループ数が3で割り切れる場合は"Fizz"、ループ数が5で割り切れる場合は"Buzz"、15で割り切れる場合は"FizzBuzz"と出力する"`

### 配列
Javascriptにはint,string,boolean等、様々な型が存在する。  
この中で特に重要なのが、**配列**と呼ばれる、可変長の項目を格納できる型である。  

```
var array = [1,2,3,4,5,6];
console.log(array); //  [1, 2, 3, 4, 5, 6]

var product1 = {code: "123456789" , name: "ミッキーマウス セーター"} // 連想配列
var product2 = {code: "123456780" , name: "ミ二ーマウス セーター"}
var product3 = {code: "123456781" , name: "ジェラトーニ セーター"}
var product4 = {code: "123456782" , name: "ドナルド セーター"}
var product5 = {code: "123456783" , name: "シンデレラ セーター"}
var product6 = {code: "123456784" , name: "白雪姫 セーター"}

var products = [product1, product2, product3, product4, product5, product6];

for (var i = 0; i < products.length; i++ ){
    console.log(products[i]);
}

```

配列は、DBやAPIから取得する可変長の値を格納し、まとめて扱うことができる。  
Javascriptに限らず、多くのプログラミング言語にて、配列は多用する。  

#### Exercise
- プロダクトロケーターにて、配列を扱って表現できる要素を調べてください
- 以下のプログラムを作成してください
  - `[1,2,3,4,5,6]`の合計値を求めるプログラムを、for文と配列を使って記述してください`
  - サイコロの出る目を期待値を求めるプログラムを記述してください (すべての目がでる確率は同一とする)
